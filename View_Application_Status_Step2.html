

<!DOCTYPE html>

<html>
<head><title>
	Leaves Status
</title><link rel="shortcut icon" href="Images/favicon.ico" /><link rel="stylesheet" type="text/css" href="css/mystyle.css" /><link type="text/css" href="css/reset.css" rel="stylesheet" /><link type="text/css" href="css/module.css" rel="stylesheet" /><link type="text/css" href="css/main.css" rel="stylesheet" /><link type="text/css" href="css/jquery.autocomplete.css" rel="stylesheet" />
    
    <script type="text/javascript">
        var window_style = "width=900,height=1000,toolbar=0,menubar=0,location=0,status=yes,scrollbars=yes,resizable=yes,left=50,top=50";
        function Popup_window(window_url) {
            window.open(window_url, "", window_style);
        }
    </script>
  
</head>
<body>
    <form name="aspnetForm" method="post" action="./View_Application_Status_Step2.aspx" id="aspnetForm" autocomplete="off">
<div>
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKMTE0NzIxNDMyNg9kFgJmD2QWAgIDD2QWBgIBDw8WAh4EVGV4dAUNU09VUFRJSyBHSE9TSGRkAgMPDxYCHwAFGVN1bmRheSwgRmVicnVhcnkgMjIsIDIwMjZkZAIHD2QWHgICDw8WAh8ABQ0yMDI1SDE1NDA4MDNQZGQCBA8PFgIfAAUNU09VUFRJSyBHSE9TSGRkAgYPDxYCHwAFImgyMDI1MDgwM0BwaWxhbmkuYml0cy1waWxhbmkuYWMuaW5kZAIIDw8WAh8ABQo4MDE3MTYyODc0ZGQCCg8PFgIfAAUOTWFsdml5YSBCaGF3YW5kZAIMDw8WAh8ABQQzMjE5ZGQCDg8PFgIfAAUTUHJvZi4gVHJpbG9rIE1hdGh1cmRkAhAPDxYCHwAFJ21hbHZpeWEud2FyZGVuQHBpbGFuaS5iaXRzLXBpbGFuaS5hYy5pbmRkAhIPDxYCHwAFCzE4LURlYy0yMDI1ZGQCFA8PFgIfAAULMDQtSmFuLTIwMjZkZAIWDw8WAh8ABQ5TZW1lc3RlciBicmVha2RkAhgPDxYCHwAFFDEzLURlYy0yMDI1IDA3OjA3IFBNZGQCGg8WAh4HVmlzaWJsZWdkAhwPDxYGHwAFCEFwcHJvdmVkHglGb3JlQ29sb3IKNR4EXyFTQgIEZGQCHg8WAh8BZxYGAgEPDxYCHwAFME5vIG5lZWQgdG8gYXBwbHkgZm9yIGxlYXZlIGR1cmluZyBzZW1lc3RlciBicmVha2RkAgMPDxYCHwAFE1Byb2YuIFRyaWxvayBNYXRodXJkZAIFDw8WAh8ABRQxNS1EZWMtMjAyNSAxMTo0OCBBTWRkZL6A1tuvQQdWgapXdupmBn7+2foMhYPwwRKiWdNlLiqd" />
</div>

<script type="text/javascript">
//<![CDATA[
var theForm = document.forms['aspnetForm'];
if (!theForm) {
    theForm = document.aspnetForm;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
//]]>
</script>


<script src="/SWD/WebResource.axd?d=rbCQmqaPllqTM7rtEyTJjOQiSmSxvVwv2TdfICjPBszNjjADQa3E23D1VDG4V-KX-HRpVnZlmxRdtJ60vRhmooxZClk06mtKY-pM2AyB4KI1&amp;t=638901734248157332" type="text/javascript"></script>

<div>

	<input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="BF3FCDA6" />
	<input type="hidden" name="__SCROLLPOSITIONX" id="__SCROLLPOSITIONX" value="0" />
	<input type="hidden" name="__SCROLLPOSITIONY" id="__SCROLLPOSITIONY" value="0" />
	<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />
	<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />
</div>
    <div id="main" align="center">
        <table id="t1" border="0" cellpadding="0" cellspacing="0" width="100% "
            bgcolor="White">
            <tr>
                <td>
                    <div id="Div1" align="left">
                        <div class="headerWrapper">
                            <div class="headerWrapperFix">
                                <h1 class="hidden">
                                    BITS Pilani</h1>
                                <div class="logoWrapper">
                                     <a href="#" class="logo" target="_blank">
                                         <img src="Images/BITS_Pilani_campus_logo.gif" alt="BITS Logo" />
                                     </a>
                                </div>
                                 
                              <ul class="mainNav">
                                 <li><a href="Instructions.aspx">Apply For Leaves</a></li>
                                 <li><a href="Downloads/Parent's_Consent_Form.pdf" target="_blank">Download Parent's Consent Form</a></li>
                                 <li><a href="View_Application_Status_Step1.aspx">Leaves Status</a></li>
                            </ul>  
                           
                
                               <ul class="siteInfo" style="right: 110px; width: 380px; top: 8px; height: 50px">
                                    <li style="width: 435px">
                                        <p class="siteLog" style="text-align: center">
                                            <br />
                                            <span style="font-size: 0.9em"><span style="font-size: 1.1em">Student Welfare Division (SWD)</span> </span>
                                        </p>
                                    </li>
                                </ul>
                                <!-- Top Right Colored Strip -->
                                <div class="topColorBar">
                                    <span class="color yellow"></span>
                                    <span class="color blue"></span>
                                    <span class="color red"></span>
                                </div>
                            </div>
                        </div>
                        <div class="nav-blue-bar"></div>
                    </div>
                </td>
            </tr>
           <tr>
                           
                            <td  class="body_txt_in" style="height: 30px">
                            <table id="UserInfo" style="width: 100%">
                            <tbody>
                            <tr>
                            <td width="70%" align="left"style="margin-left:45px "><div> <span style="color:#211d70" ><strong><span style="color:#211d70">&nbsp;&nbsp;&nbsp;&nbsp;W</span>elcome</strong>,</span>
                              <span id="ctl00_Name" style="display:inline-block;color:#211D70;font-weight:bold;width:469px;">SOUPTIK GHOSH</span></div>
                            
                            
                            </td>
                             <td width="30%"> 
                                    <table id="table_logout_details" width="100%">
                                        <tbody>
                                            <tr>
                                                
                                                <td>
                                                   <div id="div_logout" align="right" style="margin-right:20px">
                                                     <span id="ctl00_lbl_current_date" style="color:#211D70;font-weight:bold;">Sunday, February 22, 2026</span>&nbsp;
                                                       <span id="ctl00_lbl_spacer" style="color:#211D70;font-weight:bold;">|</span>&nbsp;
                                                  
                                                   <a class="footer" href="Logout.aspx"><strong><span style="font-size: 8pt">[Logout]</span></strong></a>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                            </td>
                            </tr>
                            </tbody>
                            
                            </table>
                          
                              
                                </td>
             
</tr>  
            <tr>
                <td>
                    <table align="center" border="0" cellpadding="0" cellspacing="0" width="100%" style="height: 300px">
                        <tr>
                            <td id="contentpane" style="width: 100%; vertical-align: top">
                                <div align="center">
                                    
    <script type="text/javascript">
        function demoFromHTML() {
            var pdf = new jsPDF('p', 'pt', 'letter');
            // source can be HTML-formatted string, or a reference
            // to an actual DOM element from which the text will be scraped.
            source = $('#Div_Export_To_PDF')[0];
           

            // we support special element handlers. Register them with jQuery-style
            // ID selector for either ID or node name. ("#iAmID", "div", "span" etc.)
            // There is no support for any other type of selectors
            // (class, of compound) at this time.
            specialElementHandlers = {
                // element with id of "bypass" - jQuery style selector
                '#Div_Export_To_PDF': function (element, renderer) {
                    // true = "handled elsewhere, bypass text extraction"
                    return true
                }
            };
            margins = {
                top: 80,
                bottom: 60,
                left: 40,
                width: 522
            };
            // all coords and widths are in jsPDF instance's declared units
            // 'inches' in this case
            pdf.fromHTML(
                source, // HTML string or DOM elem ref.
                margins.left, // x coord
                margins.top, {// y coord
                'width': margins.width, // max width of content on PDF
                'elementHandlers': specialElementHandlers
            },
                function (dispose) {
                    // dispose: object with X, Y of the last line add to the PDF
                    //          this allow the insertion of new lines after html
                    pdf.save('Test.pdf');
                }
                , margins);
        }
    </script>




 <div align="center">
<table border="0" id="table_attendance_details" cellpadding="0" width="950px" cellspacing="0" >
    <tbody>
		<tr valign="top">
			<td class="head_already" style="height: 30px"> <div style="text-align: center">
			 <span>Leaves Status</span></div>
			 </td>
		</tr>


	</tbody>
	</table><br />

      <table width="950px">
    <tr>
        <td>
            <div align="right" style="margin-right:10px">
             <a href="View_Application_Status_Step1.html"><img alt="" src="Images/GoBack.png" height="36px" width="125px"></img></a>
            </div>
        </td>
    </tr>
</table>
    <br />

    

     <div id="Div_Export_To_PDF">

	  <table border="0" class="body_txt_in" cellpadding="0" cellspacing="0" style="width: 950px; height: 55px; border: 1px solid #4a9ace">
                <tbody>

                    
                    <tr>
			            <td colspan="3" style="background-color: #4a9ace; height: 22px;">
			            <div class="boxHead">    
			            <div class="heading">Student Details</div>
			            </div>
			            </td>
			        </tr>
			        
			        <tr>
			            <td colspan="3" style=" height: 15px;" align="center">
			            </td>
			        </tr>
			        
			     <tr>
			            <td>
			                <table border="0"  class="body_txt_in" cellpadding="0" cellspacing="0" width="100%">
			                <tbody>
                                    
                                  
                                    <tr>
                                        <td style="height: 30px; width: 168px; text-align:left;">&nbsp;&nbsp;<strong>IDNO</strong></td>
                                        <td style="height: 30px; width: 19px; text-align:left;">&nbsp;&nbsp;<strong>:</strong></td>
                                        <td align="left"style="height: 30px; width: 500px;">&nbsp;&nbsp; 
                                        <span id="ctl00_ContentPlaceHolder1_lbl_student_idno" style="color:DarkRed;font-weight:bold;">2025H1540803P</span>
                                        </td>
                                    </tr>

                                    <tr><td colspan="3" style="height:10px"></td></tr>

                                    <tr>
                                        <td style="height: 30px; width: 168px; text-align:left;">&nbsp;&nbsp;<strong>Name</strong></td>
                                        <td style="height: 30px; width: 19px; text-align:left;">&nbsp;&nbsp;<strong>:</strong></td>
                                        <td align="left"style="height: 30px; width: 500px;">&nbsp;&nbsp; 
                                        <span id="ctl00_ContentPlaceHolder1_lbl_student_name" style="color:DarkRed;font-weight:bold;">SOUPTIK GHOSH</span>
                                        </td>
                                    </tr>

                                    <tr><td colspan="3" style="height:10px"></td></tr>

                                    <tr>
                                        <td style="height: 30px; width: 168px; text-align:left;">&nbsp;&nbsp;<strong>BITS Email ID</strong></td>
                                        <td style="height: 30px; width: 19px; text-align:left;">&nbsp;&nbsp;<strong>:</strong></td>
                                        <td align="left"style="height: 30px; width: 500px;">&nbsp;&nbsp; 
                                        <span id="ctl00_ContentPlaceHolder1_lbl_student_email_id">h20250803@pilani.bits-pilani.ac.in</span>
                                        </td>
                                    </tr>

                                     <tr><td colspan="3" style="height:10px"></td></tr>

                                    <tr>
                                        <td style="height: 30px; width: 168px; text-align:left;">&nbsp;&nbsp;<strong>Contact No.</strong></td>
                                        <td style="height: 30px; width: 19px; text-align:left;">&nbsp;&nbsp;<strong>:</strong></td>
                                        <td align="left"style="height: 30px; width: 500px;">&nbsp;&nbsp; 
                                         <span id="ctl00_ContentPlaceHolder1_lbl_student_contact_no">8017162874</span>
                                        </td>
                                    </tr>

                                     <tr><td colspan="3" style="height:10px"></td></tr>
			                </tbody>
                            </table>
			          </td>
			           </tr>


                     <tr>
			            <td colspan="3" style="background-color: #4a9ace; height: 22px;">
			            <div class="boxHead">    
			            <div class="heading">Hostel Details</div>
			            </div>
			            </td>
			        </tr>
			        
			        <tr>
			            <td colspan="3" style=" height: 15px;" align="center">
			            </td>
			        </tr>


                     <tr>
			            <td>
			                <table border="0"  class="body_txt_in" cellpadding="0" cellspacing="0" width="100%">
			                <tbody>
                                    
                                  
                                     <tr>
                                        <td style="height: 30px; width: 168px; text-align:left;">&nbsp;&nbsp;<strong>Hostel</strong></td>
                                        <td style="height: 30px; width: 19px; text-align:left;">&nbsp;&nbsp;<strong>:</strong></td>
                                        <td align="left"style="height: 30px; width: 500px;">&nbsp;&nbsp; 
                                        <span id="ctl00_ContentPlaceHolder1_lbl_hostel_name" style="color:DarkRed;font-weight:bold;">Malviya Bhawan</span>
                                        </td>
                                    </tr>
                               
                                 <tr><td colspan="3" style="height:10px"></td></tr>

                                    <tr>
                                        <td style="height: 30px; width: 168px; text-align:left;">&nbsp;&nbsp;<strong>Room No.</strong></td>
                                        <td style="height: 30px; width: 19px; text-align:left;">&nbsp;&nbsp;<strong>:</strong></td>
                                        <td align="left"style="height: 30px; width: 500px;">&nbsp;&nbsp; 
                                        <span id="ctl00_ContentPlaceHolder1_lbl_room_no" style="color:DarkRed;font-weight:bold;">3219</span>
                                        </td>
                                    </tr>

                                 <tr><td colspan="3" style="height:10px"></td></tr>

                                    <tr>
                                        <td style="height: 30px; width: 168px; text-align:left;">&nbsp;<strong> Warden Name</strong></td>
                                        <td style="height: 30px; width: 19px; text-align:left;">&nbsp;&nbsp;<strong>:</strong></td>
                                        <td align="left"style="height: 30px; width: 500px;">&nbsp;&nbsp; 
                                        <span id="ctl00_ContentPlaceHolder1_lbl_warden_name" style="color:DarkRed;font-weight:bold;">Prof. Trilok Mathur</span>
                                        </td>
                                    </tr>

                                <tr><td colspan="3" style="height:10px"></td></tr>

                                    <tr>
                                        <td style="height: 30px; width: 168px; text-align:left;">&nbsp;&nbsp;<strong>Warden Email Id</strong></td>
                                        <td style="height: 30px; width: 19px; text-align:left;">&nbsp;&nbsp;<strong>:</strong></td>
                                        <td align="left"style="height: 30px; width: 500px;">&nbsp;&nbsp; 
                                        <span id="ctl00_ContentPlaceHolder1_lbl_warden_email_id">malviya.warden@pilani.bits-pilani.ac.in</span>
                                        </td>
                                    </tr>
                              

                            

                                 <tr><td colspan="3" style="height:10px"></td></tr>
 
			                   </tbody>
                               </table>
                         </td>
			           </tr>

                             <tr>
			                    <td colspan="3" style="background-color: #4a9ace; height: 22px;">
			                    <div class="boxHead">    
			                    <div class="heading">Leave Details</div>
			                    </div>
			                    </td>
			                </tr>
			        
			                <tr>
			                    <td colspan="3" style=" height: 15px;" align="center">
			                    </td>
			                </tr>




                                 <tr>
			                        <td>
			                            <table border="0"  class="body_txt_in" cellpadding="0" cellspacing="0" width="100%">
			                            <tbody>

               
                                             <tr>
                                                <td style="height: 30px; width: 168px; text-align:left;">&nbsp;&nbsp;<strong>Departure Date</strong></td>
                                                <td style="height: 30px; width: 19px; text-align:left;">&nbsp;&nbsp;<strong>:</strong></td>
                                                <td align="left"style="height: 30px; width: 500px;">&nbsp;&nbsp;
                                                <span id="ctl00_ContentPlaceHolder1_lbl_departure_date" style="color:DarkRed;font-weight:bold;">18-Dec-2025</span>
                                                </td>
                                            </tr>

                                           <tr><td colspan="3" style="height:10px"></td></tr>

                                            <tr>
                                                <td style="height: 30px; width: 168px; text-align:left;">&nbsp;&nbsp;<strong>Return Date</strong></td>
                                                <td style="height: 30px; width: 19px; text-align:left;">&nbsp;&nbsp;<strong>:</strong></td>
                                                <td align="left"style="height: 30px; width: 500px;">&nbsp;&nbsp;
                                                <span id="ctl00_ContentPlaceHolder1_lbl_return_date" style="color:DarkRed;font-weight:bold;">04-Jan-2026</span>
                                                </td>
                                            </tr>

                                          <tr><td colspan="3" style="height:10px"></td></tr>

                                         <tr>
                                            <td style="height: 30px; width: 168px; text-align:left;">&nbsp;&nbsp;<strong>Leave Reason</strong></td>
                                            <td style="height: 30px; width: 19px; text-align:left;">&nbsp;&nbsp;<strong>:</strong></td>
                                            <td align="left"style="height: 30px; width: 500px;">&nbsp;&nbsp; 
                                            <span id="ctl00_ContentPlaceHolder1_lbl_leave_reason">Semester break</span>
                                            </td>
                                        </tr>

                                         <tr><td colspan="3" style="height:10px"></td></tr>

                                        <tr>
                                            <td style="height: 30px; width: 168px; text-align:left;">&nbsp;&nbsp;<strong>Leaves Applied On</strong></td>
                                            <td style="height: 30px; width: 19px; text-align:left;">&nbsp;&nbsp;<strong>:</strong></td>
                                            <td align="left"style="height: 30px; width: 500px;">&nbsp;&nbsp; 
                                            <span id="ctl00_ContentPlaceHolder1_lbl_leaves_applied_on">13-Dec-2025 07:07 PM</span>
                                            </td>
                                        </tr>

                                     
                                    <div id="ctl00_ContentPlaceHolder1_div_supporting_document">
                                    <tr><td colspan="3" style="height:10px"></td></tr>

                                    <tr>
                                        <td style="height: 30px; width: 168px; text-align:left;">&nbsp;&nbsp;<strong>Supporting Document</strong></td>
                                        <td style="height: 30px; width: 19px; text-align:left;">&nbsp;&nbsp;<strong>:</strong></td>
                                        <td align="left"style="height: 30px; width: 500px;">&nbsp;&nbsp;
                                         <a href='PDFDisplay/PDFDisplay_PreProcessing.aspx?ID=d9181b99-58f2-4f02-a1e4-8fc4b44de756' target="_blank"><b>View Supporting Document</b></a>
                                        </td>
                                    </tr>
                                    </div>



                                 <tr><td colspan="3" style="height:20px"></td></tr>
			                </tbody>
                            </table>
			          </td>
			           </tr>


                         <tr>
			                    <td colspan="3" style="background-color: #4a9ace; height: 22px;">
			                    <div class="boxHead">    
			                    <div class="heading">Approval Status</div>
			                    </div>
			                    </td>
			                </tr>
			        
			                <tr>
			                    <td colspan="3" style=" height: 15px;" align="center">
			                    </td>
			                </tr>




                                 <tr>
			                        <td>
			                            <table border="0"  class="body_txt_in" cellpadding="0" cellspacing="0" width="100%">
			                            <tbody>

               
                                             <tr>
                                                <td style="height: 30px; width: 168px; text-align:left;">&nbsp;&nbsp;<strong>Approval Status</strong></td>
                                                <td style="height: 30px; width: 19px; text-align:left;">&nbsp;&nbsp;<strong>:</strong></td>
                                                <td align="left"style="height: 30px; width: 500px;">&nbsp;&nbsp;
                                                <span id="ctl00_ContentPlaceHolder1_lbl_leave_approval_status" style="color:DarkGreen;font-weight:bold;">Approved</span>
                                                </td>
                                            </tr>

                                            <div id="ctl00_ContentPlaceHolder1_div_approval_details">
                                           <tr><td colspan="3" style="height:10px"></td></tr>

                                            <tr>
                                                <td style="height: 30px; width: 168px; text-align:left;">&nbsp;&nbsp;<strong>Approval Remarks</strong></td>
                                                <td style="height: 30px; width: 19px; text-align:left;">&nbsp;&nbsp;<strong>:</strong></td>
                                                <td align="left"style="height: 30px; width: 500px;">&nbsp;&nbsp;
                                                <span id="ctl00_ContentPlaceHolder1_lbl_approval_remarks">No need to apply for leave during semester break</span>
                                                </td>
                                            </tr>

                                          <tr><td colspan="3" style="height:10px"></td></tr>

                                         <tr>
                                            <td style="height: 30px; width: 168px; text-align:left;">&nbsp;&nbsp;<strong>Processed By</strong></td>
                                            <td style="height: 30px; width: 19px; text-align:left;">&nbsp;&nbsp;<strong>:</strong></td>
                                            <td align="left"style="height: 30px; width: 500px;">&nbsp;&nbsp; 
                                            <span id="ctl00_ContentPlaceHolder1_lbl_approved_by">Prof. Trilok Mathur</span>
                                            </td>
                                        </tr>

                                         <tr><td colspan="3" style="height:10px"></td></tr>

                                        <tr>
                                            <td style="height: 30px; width: 168px; text-align:left;">&nbsp;&nbsp;<strong>Processed On</strong></td>
                                            <td style="height: 30px; width: 19px; text-align:left;">&nbsp;&nbsp;<strong>:</strong></td>
                                            <td align="left"style="height: 30px; width: 500px;">&nbsp;&nbsp; 
                                            <span id="ctl00_ContentPlaceHolder1_lbl_approved_on">15-Dec-2025 11:48 AM</span>
                                            </td>
                                        </tr>
                                        </div>

                                        <tr><td colspan="3" style="height:20px"></td></tr>
			                </tbody>
                            </table>
			          </td>
			           </tr>

			           </tbody>
                       </table>
        </div>

	</div>
    <br /><br /><br />




                                </div>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td>
                  
                </td>
            </tr>
        </table>
    </div>
       
    

<script type="text/javascript">
//<![CDATA[

theForm.oldSubmit = theForm.submit;
theForm.submit = WebForm_SaveScrollPositionSubmit;

theForm.oldOnSubmit = theForm.onsubmit;
theForm.onsubmit = WebForm_SaveScrollPositionOnSubmit;
//]]>
</script>
</form>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
const { createClient } = supabase;

const supabaseClient = createClient(
  "https://xvbsdljanvnenidalvha.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh2YnNkbGphbnZuZW5pZGFsdmhhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY5MjY3NzUsImV4cCI6MjA4MjUwMjc3NX0.lILWvc8njubkga1wzpWiHuHkaUxkew9QW4HPJ9ak0Xw"
);

// Get IDNO from URL
const sessionCookie = getCookie("studentSession");

if (!sessionCookie) {
    alert("Session expired. Please login again.");
    window.location.href = "index.html";
}
const studentData = JSON.parse(sessionCookie);
const idno = studentData.idno;

function getCookie(name) {
    const cname = name + "=";
    const decodedCookie = decodeURIComponent(document.cookie);
    const ca = decodedCookie.split(';');
    for (let i = 0; i < ca.length; i++) {
        let c = ca[i].trim();
        if (c.indexOf(cname) === 0) {
            return c.substring(cname.length, c.length);
        }
    }
    return null;
}

// Format date helper
function formatDate(dateStr) {
    const d = new Date(dateStr);
    return d.toLocaleDateString("en-GB", {
        day: "2-digit",
        month: "short",
        year: "numeric"
    });
}

function formatDateTime(dateStr) {
    const d = new Date(dateStr);
    return d.toLocaleString("en-GB", {
        day: "2-digit",
        month: "short",
        year: "numeric",
        hour: "2-digit",
        minute: "2-digit"
    });
}

function getPreviousDateAt7PM(dateStr) {
    const d = new Date(dateStr);

    // Subtract 1 day
    d.setDate(d.getDate() - 1);

    // Set time to 7:00 PM
    d.setHours(19, 21, 47, 23);

    return d;
}

async function loadData() {

    const { data, error } = await supabaseClient
        .from("leave")
        .select(`
            departure,
            return,
            reason,
            applied_on,
            student (
                idno,
                name,
                bits_email_id,
                contact_no,
                room,
                hostel (
                    hostelname,
                    wardenname,
                    wardenemail
                )
            )
        `)
        .eq("idno", idno)
        .order("applied_on", { ascending: false })
        .limit(1)
        .single();

    if (error || !data) {
        alert("No leave record found.");
        return;
    }

    const student = data.student;
    const hostel = student.hostel;

    // Student Details
    document.getElementById("ctl00_ContentPlaceHolder1_lbl_student_idno").innerText = student.idno;
    document.getElementById("ctl00_ContentPlaceHolder1_lbl_student_name").innerText = student.name;
    document.getElementById("ctl00_ContentPlaceHolder1_lbl_student_email_id").innerText = student.bits_email_id;
    document.getElementById("ctl00_ContentPlaceHolder1_lbl_student_contact_no").innerText = student.contact_no;

    // Hostel Details
    document.getElementById("ctl00_ContentPlaceHolder1_lbl_hostel_name").innerText = hostel.hostelname;
    document.getElementById("ctl00_ContentPlaceHolder1_lbl_room_no").innerText = student.room;
    document.getElementById("ctl00_ContentPlaceHolder1_lbl_warden_name").innerText = hostel.wardenname;
    document.getElementById("ctl00_ContentPlaceHolder1_lbl_warden_email_id").innerText = hostel.wardenemail;

    // Leave Details
    document.getElementById("ctl00_ContentPlaceHolder1_lbl_departure_date").innerText = formatDate(data.departure);
    document.getElementById("ctl00_ContentPlaceHolder1_lbl_return_date").innerText = formatDate(data.return);
    document.getElementById("ctl00_ContentPlaceHolder1_lbl_leave_reason").innerText = data.reason;
    document.getElementById("ctl00_ContentPlaceHolder1_lbl_leaves_applied_on").innerText = formatDateTime(data.applied_on);

    // Approval Status (Static for now)
    document.getElementById("ctl00_ContentPlaceHolder1_lbl_leave_approval_status").innerText = "Approved";
    document.getElementById("ctl00_ContentPlaceHolder1_lbl_approval_remarks").innerText = "Approved";
    document.getElementById("ctl00_ContentPlaceHolder1_lbl_approved_by").innerText = hostel.wardenname;
    document.getElementById("ctl00_ContentPlaceHolder1_lbl_approved_on").innerText = formatDate(getPreviousDateAt7PM(data.departure));
}

loadData();
</script>
</body>
</html>
